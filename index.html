<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Royal's VÅ“ux 2026 - Bonne AnnÃ©e</title>
    <link rel="stylesheet" href="voeux.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="Capture d'Ã©cran 2025-12-29 121940.png">
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, limit, onSnapshot, deleteDoc, doc, getDocs, writeBatch } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCAgYVLTRlsHh20IlAuq2_Z4Z-G1-pl80Q",
            authDomain: "nouvel-an-2026-cbc25.firebaseapp.com",
            projectId: "nouvel-an-2026-cbc25",
            storageBucket: "nouvel-an-2026-cbc25.firebasestorage.app",
            messagingSenderId: "71183787510",
            appId: "1:71183787510:web:69b6c3547298fbecef93d7"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        window.firebaseApp = app;
        window.firebaseDb = db;
        window.firebaseModules = {
            collection, addDoc, serverTimestamp, query, orderBy, 
            limit, onSnapshot, deleteDoc, doc, getDocs, writeBatch
        };
    </script>
</head>
<body>
    <!-- Ã‰lÃ©ment audio pour la musique -->
    <audio id="background-music" loop>
        <source src="musique-festive.mp3" type="audio/mpeg">
        Votre navigateur ne supporte pas l'Ã©lÃ©ment audio.
    </audio>

    <!-- Canvas pour les confettis -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Conteneur pour les flocons de neige -->
    <div id="snowflakes-container"></div>

    <!-- ContrÃ´le de musique -->
    <div class="music-control">
        <button id="music-toggle" class="music-btn">
            ğŸµ Musique
        </button>
        <div id="volume-control" class="music-volume">
            <input type="range" min="0" max="100" value="50" class="volume-slider" id="volume-slider">
            <div style="margin-top: 8px; font-size: 0.8rem; color: var(--text-color);">
                Volume: <span id="volume-value">50</span>%
            </div>
        </div>
    </div>
        <!-- Modal de carte de vÅ“ux avec bouton retour -->
<div id="wish-card-modal" class="wish-card-modal">
    <div class="wish-card">
        <!-- CROIX DE RETOUR EN HAUT Ã€ DROITE -->
        <button onclick="closeWishCard()" class="close-wish-card" title="Fermer et retourner au site">Ã—</button>
        
        <div class="wish-card-header">
            <h2>ğŸ‰ Carte de VÅ“ux 2026 ğŸ‰</h2>
            <div class="wish-card-from" id="wish-card-from"></div>
        </div>
        <div class="wish-card-content">
            <div class="wish-card-message" id="wish-card-message"></div>
            <div class="wish-card-signature">
                Avec toute mon affection,<br>
                <strong>Royal's</strong>
            </div>
        </div>
        <div class="wish-card-share">
            <button onclick="shareOnWhatsApp()" class="share-btn whatsapp" title="Partager sur WhatsApp">
                ğŸ’¬ 
            </button>
            <button onclick="shareOnFacebook()" class="share-btn facebook" title="Partager sur Facebook">
                ğŸ“˜ 
            </button>
            <button onclick="copyWishCard()" class="share-btn copy" title="Copier le texte ">
                ğŸ“‹ 
            </button>
            <button onclick="closeWishCard()" class="share-btn return-btn" title="Retour au site">
                â†©ï¸ 
            </button>
        </div>
    </div>
</div>

    <!-- Login admin modal -->
    <div id="admin-login-modal" class="admin-login-modal">
        <div class="admin-login-content">
            <button onclick="closeAdminLogin()" class="close-modal-btn" title="Fermer">Ã—</button>
            <h2>ğŸ” Portail Administrateur</h2>
            <p>AccÃ©dez au panel de gestion des vÅ“ux</p>
            <input type="password" id="admin-password" class="admin-input" placeholder="Entrez le token admin">
            <button onclick="checkAdminLogin()" class="admin-login-btn">AccÃ©der au panel</button>
            <p style="margin-top: 15px; font-size: 0.8rem; color: var(--muted-color);">
                Token : seul Gildas le connait ğŸ˜Š
            </p>
        </div>
    </div>

    <!-- Panel admin (cachÃ© sur le cÃ´tÃ©) -->
    <div id="admin-panel" class="admin-panel">
        <div class="admin-panel-header">
            <h3>ğŸ”§ Administration</h3>
            <button onclick="closeAdminPanel()" class="close-admin-btn">Ã—</button>
        </div>
        <div class="admin-stats">
            <div class="admin-stats-grid">
                <div class="admin-stat-item">
                    <div class="admin-stat-value" id="admin-total-count">0</div>
                    <div class="admin-stat-label">Total vÅ“ux</div>
                </div>
                <div class="admin-stat-item">
                    <div class="admin-stat-value" id="admin-online-count">0</div>
                    <div class="admin-stat-label">En ligne</div>
                </div>
                <div class="admin-stat-item">
                    <div class="admin-stat-value" id="admin-local-count">0</div>
                    <div class="admin-stat-label">Locaux</div>
                </div>
                <div class="admin-stat-item">
                    <div class="admin-stat-value" id="admin-visitors-count">0</div>
                    <div class="admin-stat-label">Visiteurs</div>
                </div>
            </div>
        </div>
        <div class="admin-actions">
            <button onclick="exportMessages()" class="admin-action-btn">
                ğŸ“¥ Exporter tous les vÅ“ux
            </button>
            <button onclick="importMessages()" class="admin-action-btn">
                ğŸ“¤ Importer des vÅ“ux
            </button>
            <button onclick="syncAllMessages()" class="admin-action-btn">
                ğŸ”„ Synchroniser tout
            </button>
            <button onclick="clearAllMessages()" class="admin-action-btn delete">
                ğŸ—‘ï¸ Tout effacer
            </button>
            <button onclick="showDetailedStats()" class="admin-action-btn">
                ğŸ“Š Statistiques dÃ©taillÃ©es
            </button>
        </div>
        <div id="admin-stats-details" style="margin-top: 20px; font-size: 0.9rem; color: var(--muted-color);"></div>
    </div>

    <!-- Header avec logo Royal's -->
    <header class="site-header" role="banner">
        <div class="site-header-inner">
            <div class="brand" aria-hidden="true">
                <div class="brand-logo">
                    <img src="Capture d'Ã©cran 2025-12-29 121940.png" alt="Royal's Logo" class="logo-img">
                </div>
                <div class="brand-text"><strong style="color: white;">Gildas's</strong></div>
            </div>
            <nav class="site-nav" aria-label="Navigation principale">
                <a href="#" class="nav-link">Accueil</a>
                <a href="#messages" class="nav-link">VÅ“ux</a>
                <button id="theme-toggle" class="btn-secondary" type="button" style="padding: 8px 12px;" title="Changer le thÃ¨me">ğŸŒ™</button>
                <button id="celebrate-btn" class="celebrate-btn" type="button" title="Lancer une explosion de confettis">
                    ğŸŠ waouhh !
                </button>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="greeting-card" id="greeting-card">
            <h1>ğŸ‰ Je vous souhaite ğŸ‰</h1>
            <p>Une merveilleuse annÃ©e 2026 pleine de bonheur, de succÃ¨s, de santÃ© et d'amour !</p>
            <div class="countdown" id="countdown" aria-live="polite" aria-atomic="true" role="timer" title="Compte Ã  rebours jusqu'au Nouvel An 2026">
                <div class="countdown-inner">
                    <div class="time-segment"><span class="num" id="cd-days">0</span><span class="label">Jours</span></div>
                    <div class="time-segment"><span class="num" id="cd-hours">00</span><span class="label">Heures</span></div>
                    <div class="time-segment"><span class="num" id="cd-mins">00</span><span class="label">Minutes</span></div>
                    <div class="time-segment"><span class="num" id="cd-secs">00</span><span class="label">Secondes</span></div>
                </div>
            </div>
        </div>

        <!-- Interface CÃ”TÃ‰ Ã€ CÃ”TÃ‰ -->
        <div class="side-by-side-container" >
            <!-- Section GAUCHE : Ã‰crivez vos vÅ“ux -->
            <div class="write-wishes-section">
                <div class="form-container" id="messages">
                    <h3>âœï¸ Ã‰crivez vos vÅ“ux</h3>
                    <input id="name" type="text" placeholder="Votre prÃ©nom (optionnel)">
                    <textarea id="message" placeholder="Ã‰crivez vos vÅ“ux pour 2026 ici... Que me souhaitez-vous pour cette nouvelle annÃ©e ?"></textarea>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="submitMessage()" id="submit-btn">âœ¨ Envoyer </button>
                    </div>
                    <p class="admin-note">
                        Votre vÅ“u sera partagÃ© en temps rÃ©el .<br>
                    </p>
                </div>
            </div>

            <!-- Section DROITE : VÅ“ux reÃ§us -->
            <div class="wishes-received-section">
                <div class="messages-container">
                    <div class="messages-header">
                        <h3>ğŸ“œ VÅ“ux reÃ§us</h3>
                        <div class="messages-count">
                            <span id="messages-count">0</span> vÅ“ux
                        </div>
                    </div>
                    <button onclick="refreshMessages()" class="refresh-btn" title="Actualiser les messages">
                        ğŸ”„ Actualiser
                    </button>
                    <div id="empty-state" class="empty-state">
                        <div class="empty-state-icon">âœ¨</div>
                        <div>
                            <strong>Aucun vÅ“u pour le moment</strong><br>
                            <span style="font-size: 0.9rem;">Soyez le premier Ã  partager vos vÅ“ux !</span>
                        </div>
                    </div>
                    <ul id="messages-list" class="messages-grid">
                        <!-- Les vÅ“ux seront ajoutÃ©s ici -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-contact">
                <h3><a href="tel:+22899522491" class="phone-number">ğŸ“ Contactez-moi</a></h3>

                <div class="footer-social">
                    <a href="mailto:contact@royals-voeux.com?subject=VÅ“ux%202026" class="social-link" title="Email">âœ‰ï¸</a>
                    <a href="https://wa.me/22899522491?text=Bonjour%20Royal's%20!%20Je%20viens%20de%20voir%20ton%20site%20de%20vÅ“ux%202026%20ğŸ‰" class="social-link" title="WhatsApp" target="_blank">ğŸ’¬</a>
                    <a href="tel:+22899522491" class="social-link" title="TÃ©lÃ©phone">ğŸ“</a>
                </div>
            </div>
            <div class="footer-copyright">
                Â© 2025-2026 <strong>Royal's</strong> - VÅ“ux de Nouvel An. Tous droits rÃ©servÃ©s.<br>
                Partagez l'amour et les bonnes ondes pour 2026 ! âœ¨
            </div>
        </div>
    </footer>

    <!-- Portail admin (bouton flottant) -->
    <div class="admin-portal-link">
        <button onclick="openAdminLogin()" class="admin-portal-btn" title="portail des donnees Statistiques reserve uniquement a l'admin Gildas">
            ğŸ”§ portail admin
        </button>
    </div>

    <script src="voeux.js"></script>
</body>
</html>